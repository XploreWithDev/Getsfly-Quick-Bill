<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getsfly Homework Portal</title>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#f4f6f8; margin:0; padding:0; }
header { background:#2563eb; color:white; padding:15px 30px; font-size:1.5em; font-weight:bold; text-align:center;}
.container { max-width:900px; margin:30px auto; background:#fff; padding:25px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1);}
input, textarea, select, button { width:100%; margin:10px 0; padding:12px; border-radius:8px; border:1px solid #ccc; font-size:1em;}
button { background:#2563eb; color:white; border:none; cursor:pointer; transition:0.3s;}
button:hover { background:#1e40af; }
.logout-btn { background:#ef4444; float:right; width:auto; padding:8px 16px; }
.card { border:1px solid #ddd; border-radius:8px; padding:15px; margin:15px 0; background:#fafafa; box-shadow:0 2px 6px rgba(0,0,0,0.05);}
.file-link { text-decoration:none; color:#2563eb; margin-right:5px;}
.hidden { display:none;}
h2 { text-align:center; margin-bottom:20px;}
</style>
</head>
<body>

<header>Getsfly Homework Portal</header>

<!-- Login -->
<div class="container" id="loginDiv">
<h2>Login</h2>
<select id="role">
<option value="student">Student</option>
<option value="teacher">Teacher</option>
</select>
<input type="text" id="name" placeholder="Enter Name">
<input type="text" id="className" placeholder="Enter Class (for student)">
<input type="password" id="password" placeholder="Enter Teacher Password">
<button onclick="login()">Login</button>
</div>

<!-- Teacher Dashboard -->
<div class="container hidden" id="teacherDiv">
<button class="logout-btn" onclick="logout()">Logout</button>
<h2>Teacher Dashboard</h2>
<label>Class:</label>
<select id="hwClass">
<option value="8A">8A</option>
<option value="8B">8B</option>
</select>
<label>Homework Title:</label><input type="text" id="hwTitle">
<label>Description:</label><textarea id="hwDesc" placeholder="Homework description"></textarea>
<label>Attach Files (names only for demo):</label><input type="text" id="hwFiles" placeholder="Comma separated file names">
<button onclick="postHomework()">Post Homework & Notify Students</button>
<p id="status"></p>
</div>

<!-- Student Dashboard -->
<div class="container hidden" id="studentDiv">
<button class="logout-btn" onclick="logout()">Logout</button>
<h2>Student Dashboard</h2>
<div id="hwList"></div>
</div>

<script>
// Teacher password
const teacherPassword = 'GHSCHITLAPAKKAM';

// Sample student database
const students = [
  { name:'Ravi', class:'8A' },
  { name:'Anita', class:'8A' },
  { name:'Kiran', class:'8A' },
  { name:'Maya', class:'8B' }
];

// Load homework from LocalStorage
let homeworkList = JSON.parse(localStorage.getItem('homeworkList')) || [];

// Request notification permission
if(Notification.permission !== "granted") Notification.requestPermission();

// Login
function login(){
  const role = document.getElementById('role').value;
  const name = document.getElementById('name').value.trim();
  const className = document.getElementById('className').value.trim();
  const password = document.getElementById('password').value.trim();

  if(role==='teacher'){
    if(password !== teacherPassword){ alert('Wrong password'); return; }
    localStorage.setItem('role','teacher'); localStorage.setItem('name',name);
    document.getElementById('loginDiv').classList.add('hidden');
    document.getElementById('teacherDiv').classList.remove('hidden');
  } else {
    if(!name || !className){ alert('Enter name and class'); return; }
    localStorage.setItem('role','student'); localStorage.setItem('name',name); localStorage.setItem('class',className);
    document.getElementById('loginDiv').classList.add('hidden');
    document.getElementById('studentDiv').classList.remove('hidden');
    loadHomework(className);
  }
}

// Logout
function logout(){
  localStorage.clear();
  document.getElementById('loginDiv').classList.remove('hidden');
  document.getElementById('teacherDiv').classList.add('hidden');
  document.getElementById('studentDiv').classList.add('hidden');
}

// Post homework
function postHomework(){
  const className = document.getElementById('hwClass').value;
  const title = document.getElementById('hwTitle').value.trim();
  const desc = document.getElementById('hwDesc').value.trim();
  const filesInput = document.getElementById('hwFiles').value.trim();

  if(!title){ alert('Enter homework title'); return; }

  const files = filesInput ? filesInput.split(',').map(f=>f.trim()) : [];
  const hw = { id:Date.now(), className, title, desc, files };
  homeworkList.push(hw);
  localStorage.setItem('homeworkList', JSON.stringify(homeworkList));

  // Notify students
  students.filter(s=>s.class===className).forEach(s=>{
    notifyStudent(s.name, title);
  });

  document.getElementById('status').innerText = 'Homework posted and notifications sent!';
  document.getElementById('hwTitle').value=''; document.getElementById('hwDesc').value=''; document.getElementById('hwFiles').value='';
}

// Show notification
function notifyStudent(name, title){
  if(Notification.permission === "granted"){
    new Notification(`New Homework for ${name}`, { body: `"${title}" has been assigned. Finish it soon!` });
  }
}

// Load homework for student
function loadHomework(className){
  homeworkList = JSON.parse(localStorage.getItem('homeworkList')) || [];
  const hwDiv = document.getElementById('hwList'); hwDiv.innerHTML='';
  homeworkList.filter(hw=>hw.className===className).forEach(hw=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML=`<strong>${hw.title}</strong><br>${hw.desc}<br>`;
    hw.files.forEach(f=>{
      const a = document.createElement('a'); a.href='#'; a.className='file-link'; a.innerText=f; card.appendChild(a);
    });
    hwDiv.appendChild(card);
    notifyStudent(localStorage.getItem('name'), hw.title);
  });
}

// Auto-login
window.onload = ()=>{
  const role = localStorage.getItem('role');
  if(role==='teacher'){ document.getElementById('loginDiv').classList.add('hidden'); document.getElementById('teacherDiv').classList.remove('hidden'); }
  if(role==='student'){ document.getElementById('loginDiv').classList.add('hidden'); document.getElementById('studentDiv').classList.remove('hidden'); loadHomework(localStorage.getItem('class')); }
};
</script>
</body>
</html>
